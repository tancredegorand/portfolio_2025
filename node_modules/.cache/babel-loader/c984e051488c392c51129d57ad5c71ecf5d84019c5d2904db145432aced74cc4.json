{"ast":null,"code":"import React,{useRef,useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import data from'../data/data.json';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Split1=()=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"split1\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"Cliquez pour d\\xE9couvrir\"}),/*#__PURE__*/_jsx(\"span\",{})]});};const Menu_page_item=_ref=>{let{titre}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"menu_page_item\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"p\",{children:titre})]});};const Menu_page=_ref2=>{let{currentSection}=_ref2;const menuRef=useRef(null);const[startY,setStartY]=useState(0);const[isVisible,setIsVisible]=useState(false);const sections=data.fr.sections;const carouselRefs=useRef(sections.map(()=>/*#__PURE__*/React.createRef()));const velocityRefs=useRef(sections.map(()=>0));useEffect(()=>{const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){setIsVisible(true);setStartY(window.scrollY);}else{setIsVisible(false);}});},{threshold:0.1});if(menuRef.current){observer.observe(menuRef.current);}return()=>{if(menuRef.current){observer.unobserve(menuRef.current);}};},[]);useEffect(()=>{if(!isVisible)return;let animationFrameId;const smoothScroll=()=>{const relativeScrollY=window.scrollY-startY;const maxScroll=1000;const boundedScrollY=Math.max(0,Math.min(relativeScrollY,maxScroll));sections.forEach((section,index)=>{var _carousel$style$trans;const carousel=carouselRefs.current[index].current;if(!carousel)return;const offset=-500+index*100;const directionMultiplier=index%2===0?1:-1;velocityRefs.current[index]+=(offset+boundedScrollY*0.2*directionMultiplier-parseFloat(((_carousel$style$trans=carousel.style.transform)===null||_carousel$style$trans===void 0?void 0:_carousel$style$trans.replace('translateX(','').replace('px)',''))||0))*0.1;velocityRefs.current[index]*=0.95;carousel.style.transform=`translateX(${velocityRefs.current[index]}px)`;});const hasMovement=velocityRefs.current.some(velocity=>Math.abs(velocity)>0.05);if(hasMovement){animationFrameId=requestAnimationFrame(smoothScroll);}};const startSmoothScroll=()=>{if(isVisible){cancelAnimationFrame(animationFrameId);animationFrameId=requestAnimationFrame(smoothScroll);}};window.addEventListener('scroll',startSmoothScroll);return()=>{window.removeEventListener('scroll',startSmoothScroll);cancelAnimationFrame(animationFrameId);};},[isVisible,startY,sections]);const handleMouseOver=index=>{carouselRefs.current.forEach((ref,i)=>{if(ref.current&&i!==index){ref.current.style.opacity='0.7';}});};const handleMouseOut=()=>{carouselRefs.current.forEach(ref=>{if(ref.current){ref.current.style.opacity='1';}});};useEffect(()=>{carouselRefs.current.forEach((ref,index)=>{if(ref.current){ref.current.addEventListener('mouseover',()=>handleMouseOver(index));ref.current.addEventListener('mouseout',handleMouseOut);}});return()=>{carouselRefs.current.forEach((ref,index)=>{if(ref.current){ref.current.removeEventListener('mouseover',()=>handleMouseOver(index));ref.current.removeEventListener('mouseout',handleMouseOut);}});};},[sections]);const renderCarousel=(section,index,isLastItem)=>/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(Link,{to:`/${section.path}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"carrousel\",ref:carouselRefs.current[index],id:section.path,children:Array(12).fill(null).map((_,i)=>/*#__PURE__*/_jsx(Menu_page_item,{titre:section.titre},i))}),!isLastItem&&/*#__PURE__*/_jsx(\"span\",{className:\"split2\"})]})},section.titre);const filteredSections=currentSection?sections.filter(section=>section.path!==currentSection.path):sections;return/*#__PURE__*/_jsxs(\"div\",{className:\"menu_page\",ref:menuRef,children:[/*#__PURE__*/_jsx(Split1,{}),filteredSections.map((section,index)=>renderCarousel(section,index,index===filteredSections.length-1)),/*#__PURE__*/_jsx(Split1,{})]});};export default Menu_page;","map":{"version":3,"names":["React","useRef","useEffect","useState","Link","data","jsx","_jsx","jsxs","_jsxs","Split1","className","children","Menu_page_item","_ref","titre","Menu_page","_ref2","currentSection","menuRef","startY","setStartY","isVisible","setIsVisible","sections","fr","carouselRefs","map","createRef","velocityRefs","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","window","scrollY","threshold","current","observe","unobserve","animationFrameId","smoothScroll","relativeScrollY","maxScroll","boundedScrollY","Math","max","min","section","index","_carousel$style$trans","carousel","offset","directionMultiplier","parseFloat","style","transform","replace","hasMovement","some","velocity","abs","requestAnimationFrame","startSmoothScroll","cancelAnimationFrame","addEventListener","removeEventListener","handleMouseOver","ref","i","opacity","handleMouseOut","renderCarousel","isLastItem","Fragment","to","path","id","Array","fill","_","filteredSections","filter","length"],"sources":["/Users/tancredegorand/Documents/TANCREDE/1-LOCAL/Portfolio/portfolio_2025/src/component/Menu_page.js"],"sourcesContent":["\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport data from '../data/data.json';\n\nconst Split1 = () => {\n    return (\n        <div className=\"split1\">\n            <span></span>\n            <p>Cliquez pour dÃ©couvrir</p>\n            <span></span>\n        </div>\n    );\n};\n\nconst Menu_page_item = ({ titre }) => {\n    return (\n        <div className='menu_page_item'>\n            <span></span>\n            <p>{titre}</p>\n        </div>\n    );\n};\n\n\n\n\nconst Menu_page = ({ currentSection }) => {\n    const menuRef = useRef(null);\n    const [startY, setStartY] = useState(0);\n    const [isVisible, setIsVisible] = useState(false);\n    \n    const sections = data.fr.sections;\n    \n    const carouselRefs = useRef(sections.map(() => React.createRef()));\n    const velocityRefs = useRef(sections.map(() => 0));\n\n    useEffect(() => {\n        const observer = new IntersectionObserver(\n            (entries) => {\n                entries.forEach(entry => {\n                    if (entry.isIntersecting) {\n                        setIsVisible(true);\n                        setStartY(window.scrollY); \n                    } else {\n                        setIsVisible(false);\n                    }\n                });\n            },\n            { threshold: 0.1 }\n        );\n\n        if (menuRef.current) {\n            observer.observe(menuRef.current);\n        }\n\n        return () => {\n            if (menuRef.current) {\n                observer.unobserve(menuRef.current);\n            }\n        };\n    }, []);\n\n    useEffect(() => {\n        if (!isVisible) return; \n\n        let animationFrameId;\n\n        const smoothScroll = () => {\n            const relativeScrollY = window.scrollY - startY;\n            const maxScroll = 1000;\n            const boundedScrollY = Math.max(0, Math.min(relativeScrollY, maxScroll));\n\n            sections.forEach((section, index) => {\n                const carousel = carouselRefs.current[index].current;\n                if (!carousel) return;\n\n                const offset = -500 + (index * 100);\n                \n                const directionMultiplier = (index % 2 === 0) ? 1 : -1;\n\n                velocityRefs.current[index] += \n                    ((offset + boundedScrollY * 0.2 * directionMultiplier) - parseFloat(carousel.style.transform?.replace('translateX(', '').replace('px)', '') || 0)) * 0.1;\n\n                velocityRefs.current[index] *= 0.95;\n                carousel.style.transform = `translateX(${velocityRefs.current[index]}px)`;\n            });\n\n            const hasMovement = velocityRefs.current.some(\n                velocity => Math.abs(velocity) > 0.05 \n            );\n\n            if (hasMovement) {\n                animationFrameId = requestAnimationFrame(smoothScroll);\n            }\n        };\n\n        const startSmoothScroll = () => {\n            if (isVisible) {\n                cancelAnimationFrame(animationFrameId);\n                animationFrameId = requestAnimationFrame(smoothScroll);\n            }\n        };\n\n        window.addEventListener('scroll', startSmoothScroll);\n\n        return () => {\n            window.removeEventListener('scroll', startSmoothScroll);\n            cancelAnimationFrame(animationFrameId);\n        };\n    }, [isVisible, startY, sections]);\n\n    const handleMouseOver = (index) => {\n        carouselRefs.current.forEach((ref, i) => {\n            if (ref.current && i !== index) {\n                ref.current.style.opacity = '0.7';\n            }\n        });\n    };\n\n    const handleMouseOut = () => {\n        carouselRefs.current.forEach(ref => {\n            if (ref.current) {\n                ref.current.style.opacity = '1';\n            }\n        });\n    };\n\n    useEffect(() => {\n        carouselRefs.current.forEach((ref, index) => {\n            if (ref.current) {\n                ref.current.addEventListener('mouseover', () => handleMouseOver(index));\n                ref.current.addEventListener('mouseout', handleMouseOut);\n            }\n        });\n\n        return () => {\n            carouselRefs.current.forEach((ref, index) => {\n                if (ref.current) {\n                    ref.current.removeEventListener('mouseover', () => handleMouseOver(index));\n                    ref.current.removeEventListener('mouseout', handleMouseOut);\n                }\n            });\n        };\n    }, [sections]);\n\n    \n    const renderCarousel = (section, index, isLastItem) => (\n        <React.Fragment key={section.titre}>\n            <Link to={`/${section.path}`}>\n                <div \n                    className=\"carrousel\" \n                    ref={carouselRefs.current[index]} \n                    id={section.path} \n                >\n                    {Array(12).fill(null).map((_, i) => (\n                        <Menu_page_item key={i} titre={section.titre} />\n                    ))}\n                </div>\n                {!isLastItem && <span className=\"split2\" />}\n            </Link>\n        </React.Fragment>\n    );\n\n    const filteredSections = currentSection \n        ? sections.filter(section => section.path !== currentSection.path)\n        : sections;\n\n    return (\n        <div className=\"menu_page\" ref={menuRef}>\n            <Split1 />\n            {filteredSections.map((section, index) => \n                renderCarousel(\n                    section, \n                    index, \n                    index === filteredSections.length - 1\n                )\n            )}\n            <Split1 />\n        </div>\n    );\n};\nexport default Menu_page;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}